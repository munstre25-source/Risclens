# Sitemap & Indexation Policy

This document outlines the strategy and rules for generating the RiscLens sitemap and managing search engine indexation.

## Goals
- Only include indexable, public-facing routes.
- Align search visibility with buyer intent.
- Maintain a deterministic, high-quality sitemap.

## Route Buckets & Priority Policy

We use a tiered priority system to signal the relative importance of pages to search engines.

| Bucket | Priority | Change Frequency | Examples |
|--------|----------|------------------|----------|
| **Flagship** | 1.0 | Weekly | Homepage (`/`) |
| **Calculators** | 0.95 | Weekly | `/soc-2-readiness-calculator`, `/soc-2-cost`, `/soc-2-timeline`, `/auditor-match` |
| **Hubs** | 0.90 | Weekly | `/penetration-testing`, `/vendor-risk-assessment`, `/soc-2/guides` |
| **Commercial** | 0.80 | Weekly | Product subpages, Pricing, Scoping, Industries |
| **Learn** | 0.70 | Monthly | Glossary, Support/Learn articles |
| **Legal** | 0.40 | Monthly | `/privacy`, `/terms` |
| **Default** | 0.70 | Monthly | Any other public indexable route |

## Exclusion Rules

The following MUST NEVER be included in the sitemap or indexed:
- **Admin Dashboard**: Any route under `/admin/*`.
- **API Routes**: Any route under `/api/*`.
- **Internal/Utility**: Search pages, experiment variants, or partial components.
- **Drafts/Experiments**: Unfinished or A/B test specific routes.
- **Duplicates**: Routes with trailing slashes or multiple paths for the same content.

## Implementation Details

### Source of Truth
`src/seo/routes.ts` is the single source of truth. It dynamically pulls routes from library files (e.g., `lib/soc2Guides.ts`) to ensure the sitemap stays in sync with our content.

### Sitemap Generation
The sitemap is generated by `app/sitemap.ts` using Next.js Metadata API. It applies the priority/frequency logic based on the buckets defined in the routes configuration.

### Last Modified (`lastmod`)
We use the build timestamp as the `lastModified` date for all routes to ensure search engines see the sitemap as fresh during deployments, while avoiding "lying" about individual page edit dates if not strictly tracked via Git.

## Maintenance
When adding a new public route:
1. If it's a dynamic route, add it to the corresponding `lib/` file.
2. If it's a static route, add it to `COMMERCIAL_ROUTES` or the appropriate bucket in `src/seo/routes.ts`.
3. Verify the sitemap output in development by checking the console summary.
