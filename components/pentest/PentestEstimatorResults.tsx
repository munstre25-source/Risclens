import Link from 'next/link';
import { formatCurrency, PentestEstimate } from '@/lib/pentestEstimator';

interface Props {
  estimate: PentestEstimate;
  testTypeLabel: string;
}

export default function PentestEstimatorResults({ estimate, testTypeLabel }: Props) {
  return (
    <div className="space-y-6">
      <div className="bg-slate-50 border border-slate-200 rounded-xl p-6">
        <p className="text-sm font-semibold text-slate-700 mb-2">Estimate</p>
        <div className="flex flex-wrap items-baseline gap-3">
          <p className="text-3xl font-bold text-slate-900">{formatCurrency(estimate.low)}</p>
          <span className="text-slate-500">to</span>
          <p className="text-3xl font-bold text-slate-900">{formatCurrency(estimate.high)}</p>
          <span className="text-sm text-slate-500">({testTypeLabel} scope)</span>
        </div>
        <p className="text-sm text-slate-600 mt-3">Range is deterministic and adjusts as you change inputs.</p>
      </div>

      <div className="grid gap-4 md:grid-cols-2">
        <div className="border border-slate-200 rounded-xl p-5">
          <p className="text-sm font-semibold text-slate-700 mb-2">What drives cost</p>
          <ul className="space-y-2 text-slate-700 text-sm">
            {estimate.drivers.map((driver) => (
              <li key={driver} className="flex gap-2">
                <span className="text-brand-600">•</span>
                <span>{driver}</span>
              </li>
            ))}
          </ul>
        </div>
        <div className="border border-slate-200 rounded-xl p-5">
          <p className="text-sm font-semibold text-slate-700 mb-2">Recommended next steps</p>
          <ul className="space-y-2 text-slate-700 text-sm">
            <li className="flex gap-2">
              <span className="text-brand-600">•</span>
              <span>Confirm scope boundaries (apps, APIs, cloud accounts) and auth flows.</span>
            </li>
            <li className="flex gap-2">
              <span className="text-brand-600">•</span>
              <span>Align timelines with compliance drivers so evidence is usable for SOC 2 and customer reviews.</span>
            </li>
            <li className="flex gap-2">
              <span className="text-brand-600">•</span>
              <span>Bundle retest expectations in the statement of work to avoid surprise fees.</span>
            </li>
          </ul>
        </div>
      </div>

      <div className="flex flex-col sm:flex-row sm:items-center gap-3">
        <Link
          href="/penetration-testing/for-soc-2"
          className="inline-flex items-center justify-center gap-2 rounded-lg bg-brand-600 px-6 py-3 text-white font-semibold shadow-sm hover:bg-brand-700 transition"
        >
          Request a Pentest Quote
          <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 8l4 4m0 0l-4 4m4-4H3" />
          </svg>
        </Link>
        <p className="text-sm text-slate-600">No commitment. We triage scope and timelines first.</p>
      </div>
    </div>
  );
}
